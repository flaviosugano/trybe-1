<!DOCTYPE html>
<html>
  <head>
    <title>Best jokes ever</title>

  <script>
  //EXERCÍCIO 1
  const API_URL = 'https://icanhazdadjoke.com/';

  const myObject = {
    method: 'GET',
    headers: { 'Accept': 'application/json' }
  };

  const fetchJoke = () => {
    fetch(API_URL, myObject)
    .then(response => response.json())
    .then(data =>
      document.getElementById('jokeContainer').innerText = data.joke
    );
  };
  window.onload = () => fetchJoke();

  //EXERCÍCIO 2
  
  let firstArray = [];
  new Promise((resolve, reject) => {
    // let total = 0;

    for(let cont = 0; cont < 10; cont += 1){
      let num = Math.floor(Math.random() * 50)
      firstArray.push(num);
    }

    const total = firstArray.map((number) => {
       return number * number;
    }).reduce((acc, curr) => {
      return acc + curr;
    });
    
    if(total < 8000){
      let result = [total/2, total/3, total/5, total/10];
      resolve(result);
    } else {
      reject(total);
    } 

  }).then(result => result)
  .then((sumArray) => sumArray.reduce((acc, curr) => acc + curr))
  .then(sumTot => console.log(`O total da soma do array das divisões é ${sumTot.toFixed(2)}`))
  .catch(number => console.log(`É mais de 8000, essa promise deve estar quebrada. O númeroi foi: ${number}`));
  
  </script>

  </head>

  <body>
    <h1>Get ready for a great joke!</h1>
    <h2 id="jokeContainer"></h2>
  </body>

</html>